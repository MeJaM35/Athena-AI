{% load static %}
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/bulma@0.9.4/css/bulma.min.css"
    />
    <title>Brand Builder Register</title>
  </head>
  <body>
    <section class="hero is-fullheight has-background-light">
      <div class="hero-body">
        <div class="container">
          <div class="columns is-centered">
            <div class="column is-6-tablet is-5-desktop is-4-widescreen">
              <div class="box">
                <h1 class="title has-text-centered">Brand Builder</h1>
                <p class="subtitle has-text-centered">
                  Register Yourself! Please enter your details.
                </p>

                <form method="post" action="{% url 'register' %}">
                  {% csrf_token %}
                  <div class="field is-horizontal">
                    <div class="field-body">
                      <div class="field">
                        <label class="label">First Name</label>
                        <div class="control">
                          <input
                            class="input"
                            type="text"
                            placeholder="Enter your First Name"
                            name="firstname"
                            id="firstname"
                          />
                        </div>
                      </div>
                      <div class="field">
                        <label class="label">Last Name</label>
                        <div class="control">
                          <input
                            class="input"
                            type="text"
                            placeholder="Enter your Last Name"
                            name="lastname"
                            id="lastname"
                          />
                        </div>
                      </div>
                    </div>
                  </div>

                  <div class="field">
                    <label class="label">Contact Number</label>
                    <div class="control">
                      <input
                        class="input"
                        type="tel"
                        pattern="[0-9]{10}"
                        placeholder="Enter your Contact Number"
                        name="tel"
                        id="tel"
                      />
                    </div>
                  </div>

                  <div class="field">
                    <label class="label">Email ID</label>
                    <div class="control">
                      <input
                        class="input"
                        type="email"
                        placeholder="Enter your Email ID"
                        name="email"
                        id="email"
                      />
                    </div>
                  </div>

                  <div class="field">
                    <label class="label">Password</label>
                    <div class="control">
                      <input
                        class="input"
                        type="password"
                        placeholder="Enter Password"
                        name="pass"
                        id="password"
                      />
                    </div>
                  </div>

                  <div class="field">
                    <label class="label">Confirm Password</label>
                    <div class="control">
                      <input
                        class="input"
                        type="password"
                        placeholder="Confirm Password"
                        name="con_pass"
                        id="confirm_password"
                      />
                    </div>
                  </div>

                  <div class="field">
                    <div class="control">
                      <label class="checkbox">
                        <input type="checkbox" id="show_password" /> Show Password
                      </label>
                    </div>
                  </div>

                  <div class="field">
                    <div class="control">
                      <button
                        type="button"
                        onclick="validateForm()"
                        class="button is-primary is-fullwidth"
                      >
                        Sign Up
                      </button>
                    </div>
                  </div>
                </form>

                <div class="buttons is-centered">
                  <a
                    href="https://accounts.google.com"
                    class="button is-light"
                  >
                    <span class="icon">
                      <img src="{% static 'logo/google.svg' %}" alt="Google" />
                    </span>
                    <span>Google</span>
                  </a>
                  <button class="button is-light">
                    <span class="icon">
                      <img src="{% static 'logo/linkedin.svg' %}" alt="LinkedIn" />
                    </span>
                    <span>LinkedIn</span>
                  </button>
                </div>

                <p class="has-text-centered">
                  Already have an account?
                  <a href="{% url 'login' %}" class="has-text-primary">Sign in</a>
                </p>
              </div>
            </div>
          </div>
        </div>
      </div>
    </section>

    <script>
      document.getElementById('show_password').addEventListener('change', function () {
        const passwordInput = document.getElementById('password');
        const confirmPasswordInput = document.getElementById('confirm_password');
        const inputType = this.checked ? 'text' : 'password';
        passwordInput.type = inputType;
        confirmPasswordInput.type = inputType;
      });

      function validateForm() {
        const firstname = document.getElementById('firstname').value.trim();
        const lastname = document.getElementById('lastname').value.trim();
        const tel = document.getElementById('tel').value.trim();
        const email = document.getElementById('email').value.trim();
        const password = document.getElementById('password').value.trim();
        const confirmPassword = document.getElementById('confirm_password').value.trim();

        if (!firstname) return alert('First Name is required');
        if (!lastname) return alert('Last Name is required');
        if (!/^[0-9]{10}$/.test(tel)) return alert('Enter a valid 10-digit Contact Number');
        if (!email) return alert('Email is required');
        if (!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(email)) return alert('Enter a valid Email ID');
        if (!password) return alert('Password is required');
        if (!confirmPassword) return alert('Confirm Password is required');
        if (password !== confirmPassword) return alert('Passwords do not match');

        alert('Successfully Signed up');
        window.location.href = "{% url 'prompt' %}";
      }
    </script>
  </body>
</html>
